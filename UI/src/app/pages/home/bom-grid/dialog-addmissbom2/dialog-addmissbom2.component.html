<nb-card>
  <nb-card-header>
      <h6>Enter BOM details <span class="batchnolabel">{{currentbatchno}}</span></h6>
  </nb-card-header>
  <nb-card-body>
    <form novalidate id="mainform" (ngSubmit)="onSubmit()" [formGroup]="mainForm">
      <div class="accordion-container">
          <nb-accordion multi>
              <nb-accordion-item>
                <nb-accordion-item-header>
                  Stabilization
                </nb-accordion-item-header>
                <nb-accordion-item-body formGroupName="stabilization">
                  <div class="form-control-group">
                    <nb-select formControlName="selectedItem">
                      <nb-option value="0">Agwet HT</nb-option>
                      <nb-option value="1">Soft Water</nb-option>
                      <nb-option value="2">Soft Water (Flushing)</nb-option>
                    </nb-select>
                  </div>
                  <br>
                  <div formArrayName="items">
                    <div *ngFor="let item of getControls('stabilization'); let i=index">
                      <div [formGroupName]="i" [hidden]="selectedValue1 != i">
                        <div class="form-control-group">
                          <label class="label" for="itembatchno">Batch No:</label>
                          <input nbInput fullWidth formControlName="itembatchno" placeholder="Batch No">
                        </div>
                        <div class="form-control-group">
                          <label class="label" for="targetweight">Target Weight:</label>
                          <input nbInput fullWidth formControlName="targetweight" placeholder="Target Weight">
                        </div>
                        <div class="form-control-group">
                          <label class="label" for="actualweight">Actual Weight:</label>
                          <input nbInput fullWidth formControlName="actualweight" placeholder="Actual Weight">
                        </div>
                      </div>
                    </div>
                  </div>
                </nb-accordion-item-body>
              </nb-accordion-item>
        
              <nb-accordion-item>
                <nb-accordion-item-header>
                  Composite
                </nb-accordion-item-header>
                <nb-accordion-item-body formGroupName="composite">
                  <div class="form-control-group">
                    <nb-select formControlName="selectedItem">
                      <nb-option value="0">Octocure HCLP-60(YS)</nb-option>
                      <nb-option value="1">Octocure ZDE 50</nb-option>
                      <nb-option value="2">Octotint 705</nb-option>
                      <nb-option value="3">Octocure 573</nb-option>
                      <nb-option value="4">Soft Water</nb-option>
                      <nb-option value="5">Soft Water (Flushing)</nb-option>
                    </nb-select>
                  </div>
                  <br>
                  <div formArrayName="items">
                    <div *ngFor="let item of getControls('composite'); let i=index">
                      <div [formGroupName]="i" [hidden]="selectedValue2 != i">
                        <div class="form-control-group">
                          <label class="label" for="itembatchno">Batch No:</label>
                          <input nbInput fullWidth formControlName="itembatchno" placeholder="Batch No">
                        </div>
                        <div class="form-control-group">
                          <label class="label" for="targetweight">Target Weight:</label>
                          <input nbInput fullWidth formControlName="targetweight" placeholder="Target Weight">
                        </div>
                        <div class="form-control-group">
                          <label class="label" for="actualweight">Actual Weight:</label>
                          <input nbInput fullWidth formControlName="actualweight" placeholder="Actual Weight">
                        </div>
                      </div>
                    </div>
                  </div>
                </nb-accordion-item-body>
              </nb-accordion-item>
        
              <nb-accordion-item>
                <nb-accordion-item-header>
                  Wax
                </nb-accordion-item-header>
                <nb-accordion-item-body formGroupName="wax">
                  <div class="form-control-group">
                    <nb-select formControlName="selectedItem">
                      <nb-option value="0">Aquawax 48</nb-option>
                      <nb-option value="1">Soft Water</nb-option>
                      <nb-option value="2">Soft Water (Flushing)</nb-option>
                    </nb-select>
                  </div>
                  <br>
                  <div formArrayName="items">
                    <div *ngFor="let item of getControls('wax'); let i=index">
                      <div [formGroupName]="i" [hidden]="selectedValue3 != i">
                        <div class="form-control-group">
                          <label class="label" for="itembatchno">Batch No:</label>
                          <input nbInput fullWidth formControlName="itembatchno" placeholder="Batch No">
                        </div>
                        <div class="form-control-group">
                          <label class="label" for="targetweight">Target Weight:</label>
                          <input nbInput fullWidth formControlName="targetweight" placeholder="Target Weight">
                        </div>
                        <div class="form-control-group">
                          <label class="label" for="actualweight">Actual Weight:</label>
                          <input nbInput fullWidth formControlName="actualweight" placeholder="Actual Weight">
                        </div>
                      </div>
                    </div>
                  </div>
                </nb-accordion-item-body>
              </nb-accordion-item>
            </nb-accordion>
      </div>
    </form>
    <!-- <button class="addbom" nbButton (click)="openModal()">Add BOM</button> <div class="labelstatus">Is BOM added: {{isBomAdded}}</div> -->
  </nb-card-body>
  <nb-card-footer>
    <button class="submit" form="mainform" type="submit" nbButton status="success"
            [disabled]="mainForm.invalid" size="small"><nb-icon icon="checkmark"></nb-icon>Submit</button>
    <button class="cancel" nbButton status="danger" (click)="cancel()" size="small"><nb-icon icon="close"></nb-icon>Cancel</button>
  </nb-card-footer>
</nb-card>
  